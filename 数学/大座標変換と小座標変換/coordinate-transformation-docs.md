# 2次元座標変換メソッドの解説

## 1. transToLocal2D（大座標系→小座標系）

### 概要
大座標系の座標を小座標系の座標に変換するメソッド

### パラメータ
- 入力パラメータ
  - x1, y1: 変換前の座標（大座標系での値）
  - x0, y0: 小座標系の原点位置（大座標系での値）
  - rt0: 小座標系のX軸方位角
  - ifg: 座標系の種類フラグ（1:同一系, -1:数学系⇔測量系）
- 出力パラメータ
  - x2, y2: 変換後の座標（小座標系での値）

### 変換手順
1. 平行移動
   - 大座標系の原点を基準とした相対座標に変換
   - dx = x1 - x0
   - dy = y1 - y0

2. 回転変換
   - x2 = dx * cos(rt0) + dy * sin(rt0)
   - y2 = dy * cos(rt0) - dx * sin(rt0)

3. 系の変換
   - y2 = y2 * ifg

## 2. transToGlobal2D（小座標系→大座標系）

### 概要
小座標系の座標を大座標系の座標に変換するメソッド

### パラメータ
- 入力パラメータ
  - x1, y1: 変換前の座標（小座標系での値）
  - x0, y0: 小座標系の原点位置（大座標系での値）
  - rt0: 小座標系のX軸方位角
  - ifg: 座標系の種類フラグ（1:同一系, -1:数学系⇔測量系）
- 出力パラメータ
  - x2, y2: 変換後の座標（大座標系での値）

### 変換手順
1. 系の変換
   - syfg = y1 * ifg

2. 回転変換
   - x2 = x1 * cos(rt0) - syfg * sin(rt0)
   - y2 = syfg * cos(rt0) + x1 * sin(rt0)

3. 平行移動
   - x2 = x2 + x0
   - y2 = y2 + y0

## 共通の注意点

1. 座標系の種類（ifg）について
   - ifg = 1: 両方の座標系が同じ種類（両方とも数学系、または両方とも測量系）
   - ifg = -1: 座標系の種類が異なる（一方が数学系で他方が測量系）

2. 回転角（rt0）について
   - 単位はラジアン
   - 右回りを正とする
   - 大座標系のX軸に対する小座標系のX軸の角度

3. 使用例
   - 測量データの座標変換
   - CADシステムでの座標系変換
   - 現場座標系とグローバル座標系の変換
